<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CaneMap - Reports</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root{
    --cane-50:#f7fee7;--cane-100:#ecfcca;--cane-200:#d8f999;--cane-300:#bbf451;--cane-400:#9ae600;--cane-500:#7ccf00;--cane-600:#5ea500;--cane-700:#497d00;--cane-800:#3c6300;--cane-900:#35530e;--cane-950:#192e03;
  }
  .section-card{background:white;border:1px solid #e5e7eb;box-shadow:0 1px 3px rgba(0,0,0,0.1);} 
  .inner-box{background:var(--cane-50);border:1px solid var(--cane-200);} 
  .drop-zone{border:2px dashed var(--cane-200);}
  .btn-primary{background:linear-gradient(135deg,var(--cane-700),var(--cane-800));color:#fff;}
  .btn-primary:hover{background:linear-gradient(135deg,var(--cane-800),var(--cane-900));}
  .search-input{padding:0.65rem 0.85rem;border-radius:0.75rem;border:1px solid #d9e2ec;background:#fff;font-size:0.85rem;transition:border-color 0.2s ease,box-shadow 0.2s ease;}
  .search-input:focus{outline:none;border-color:var(--cane-500);box-shadow:0 0 0 3px rgba(124,207,0,0.15);}
  table thead th{background:#f8fafc;font-size:0.8rem;letter-spacing:0.05em;text-transform:uppercase;color:#6b7280;font-weight:600;padding:1rem;}
  table tbody tr{transition:background-color 0.15s ease;}
  table tbody tr:hover{background-color:#f9fafb;}
  table tbody td{padding:1.25rem 1rem;font-size:0.95rem;}
  .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:50;align-items:center;justify-content:center;}
  .modal.active{display:flex;}
  .modal-content{background:linear-gradient(135deg,#ecfcca,#f7fee7);border-radius:1rem;max-width:1100px;width:95%;max-height:90vh;overflow-y:auto;}
</style>
</head>
<body class="bg-gray-100 min-h-screen p-6">

  <main class="container mx-auto px-4 lg:px-6 py-6">
    <!-- Reports List Section -->
    <div class="section-card rounded-2xl p-6">
      <div class="mb-5">
        <h2 class="text-2xl font-bold text-[var(--cane-950)] mb-1 flex items-center gap-2">
          <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-[var(--cane-100)] text-[var(--cane-700)]">
            <i class="fas fa-file-alt"></i>
          </span>
          My Reports
        </h2>
        <p class="text-sm text-gray-600">Manage and track all submitted reports to SRA.</p>
      </div>

      <!-- Action Bar -->
      <div class="mb-4 flex flex-col sm:flex-row justify-between gap-3">
        <button id="createReportBtn" class="btn-primary px-5 py-2.5 rounded-lg font-semibold shadow-md transition-all hover:shadow-lg">
          <i class="fas fa-plus mr-2"></i>Create Report
        </button>
        <div class="relative flex-1 sm:max-w-xs">
          <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-400"></i>
          <input id="searchReports" type="text" placeholder="Search reports..." class="search-input pl-9 w-full" />
        </div>
      </div>

      <!-- Reports Table -->
      <div class="overflow-hidden rounded-xl border border-gray-200">
        <table class="min-w-full">
          <thead>
            <tr>
              <th class="text-left">Date Submitted</th>
              <th class="text-left">Report Type</th>
              <th class="text-left">Field</th>
              <th class="text-left">Total Cost</th>
              <th class="text-left">Status</th>
              <th class="text-right">Actions</th>
            </tr>
          </thead>
          <tbody id="reportsTbody">
            <!-- Sample data -->
            <tr class="border-t border-gray-100">
              <td class="font-semibold text-gray-900">Oct 28, 2025</td>
              <td class="text-gray-700">Production & Cost</td>
              <td class="text-gray-700">Lot A1 - Naungan</td>
              <td class="text-gray-700">₱ 45,000.00</td>
              <td>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-green-100 text-green-800">
                  Approved
                </span>
              </td>
              <td class="text-right">
                <button class="inline-flex items-center gap-1.5 rounded-full border border-gray-200 px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <i class="fas fa-eye"></i><span>View</span>
                </button>
              </td>
            </tr>
            <tr class="border-t border-gray-100">
              <td class="font-semibold text-gray-900">Oct 25, 2025</td>
              <td class="text-gray-700">Production & Cost</td>
              <td class="text-gray-700">Lot B2 - Ipil</td>
              <td class="text-gray-700">₱ 38,500.00</td>
              <td>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-yellow-100 text-yellow-800">
                  Pending Review
                </span>
              </td>
              <td class="text-right">
                <button class="inline-flex items-center gap-1.5 rounded-full border border-gray-200 px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <i class="fas fa-eye"></i><span>View</span>
                </button>
              </td>
            </tr>
            <tr class="border-t border-gray-100">
              <td class="font-semibold text-gray-900">Oct 20, 2025</td>
              <td class="text-gray-700">Production & Cost</td>
              <td class="text-gray-700">Lot C3 - Linao</td>
              <td class="text-gray-700">₱ 52,300.00</td>
              <td>
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-green-100 text-green-800">
                  Approved
                </span>
              </td>
              <td class="text-right">
                <button class="inline-flex items-center gap-1.5 rounded-full border border-gray-200 px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 transition-colors">
                  <i class="fas fa-eye"></i><span>View</span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Empty State (hidden by default) -->
      <div id="reportsEmpty" class="hidden mt-4 rounded-xl border border-dashed border-gray-300 bg-gray-50 p-8 text-center">
        <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-white text-gray-400 shadow-inner">
          <i class="fas fa-file-alt text-2xl"></i>
        </div>
        <h3 class="mt-4 text-lg font-semibold text-gray-900">No reports yet</h3>
        <p class="mt-2 text-sm text-gray-600">Create your first report to submit to SRA.</p>
      </div>
    </div>
  </main>

  <!-- Modal for Report Form -->
  <div id="reportModal" class="modal">
    <div class="modal-content p-8">
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <button id="closeModalBtn" class="text-gray-600 hover:text-gray-800">
            <i class="fas fa-arrow-left text-xl"></i>
          </button>
          <h2 class="text-2xl font-bold text-[var(--cane-900)]">Submit Reports to SRA</h2>
        </div>
      </div>

      <p class="text-sm text-[var(--cane-800)] mb-6">Submit your cost of production and harvest reports for SRA review</p>

      <!-- Forms grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Cost of Production -->
      <section class="section-card rounded-xl p-5">
        <h2 class="font-semibold text-[var(--cane-900)] mb-4">Cost of Production Report</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Fertilizer Cost:</label>
            <div class="relative">
              <span class="absolute left-3 top-2.5 text-gray-500">₱</span>
              <input id="fertilizerCost" type="number" min="0" step="0.01" class="w-full pl-8 pr-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]" placeholder="0.00">
            </div>
          </div>
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Labor Cost:</label>
            <div class="relative">
              <span class="absolute left-3 top-2.5 text-gray-500">₱</span>
              <input id="laborCost" type="number" min="0" step="0.01" class="w-full pl-8 pr-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]" placeholder="0.00">
            </div>
          </div>
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Equipment Costs :</label>
            <div class="relative">
              <span class="absolute left-3 top-2.5 text-gray-500">₱</span>
              <input id="equipmentCost" type="number" min="0" step="0.01" class="w-full pl-8 pr-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]" placeholder="0.00">
            </div>
          </div>
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Other Expenses:</label>
            <div class="relative">
              <span class="absolute left-3 top-2.5 text-gray-500">₱</span>
              <input id="otherCost" type="number" min="0" step="0.01" class="w-full pl-8 pr-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]" placeholder="0.00">
            </div>
          </div>
        </div>

        <div class="mt-5">
          <label class="block text-sm font-medium text-[var(--cane-800)] mb-2">Total cost calculation:</label>
          <div class="inner-box rounded-lg p-3 flex items-center justify-between">
            <span class="text-sm text-[var(--cane-800)]">Estimated Total Cost</span>
            <div class="text-lg font-semibold"><span class="text-gray-500 mr-1">₱</span><span id="totalCost">0.00</span></div>
          </div>
        </div>

        <div class="mt-5">
          <label class="block text-sm font-medium text-[var(--cane-800)] mb-2">Upload Summary Report (Optional):</label>
          <label class="drop-zone rounded-lg bg-white flex flex-col items-center justify-center text-center p-8 cursor-pointer hover:bg-[var(--cane-50)]">
            <input id="summaryUpload" type="file" accept=".pdf,.png,.jpg,.jpeg" class="hidden">
            <i class="fa-solid fa-cloud-arrow-up text-2xl text-[var(--cane-600)] mb-2"></i>
            <p class="text-sm text-gray-700">Drop PDF or image files here, or click to browse</p>
            <p class="text-[10px] text-gray-500">Max file size: 10MB</p>
          </label>
        </div>
      </section>

      <!-- Production Report -->
      <section class="section-card rounded-xl p-5">
        <h2 class="font-semibold text-[var(--cane-900)] mb-4">Production Report</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Area Harvested (ha)</label>
            <input id="areaHarvested" type="number" min="0" step="0.01" class="w-full px-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]" placeholder="0.00">
          </div>
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Total Yield:</label>
            <div class="relative">
              <input id="totalYield" type="number" min="0" step="0.01" class="w-full pr-12 px-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]" placeholder="0.00">
              <span class="absolute right-3 top-2.5 text-gray-500 text-sm">kg</span>
            </div>
          </div>
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Harvest Date:</label>
            <input id="harvestDate" type="date" class="w-full px-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]">
          </div>
          <div>
            <label class="block text-sm text-[var(--cane-800)] mb-1">Sugarcane Variety:</label>
            <select id="variety" class="w-full px-3 py-2 border-2 border-[var(--cane-200)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cane-500)]">
              <option>Not selected</option>
              <option>CP 88-1165</option>
              <option>Phil 99-1793</option>
              <option>Phil 8013</option>
            </select>
          </div>
        </div>

        <div class="mt-5">
          <label class="block text-sm font-medium text-[var(--cane-800)] mb-2">Upload Harvest Photo (Optional):</label>
          <label class="drop-zone rounded-lg bg-white flex flex-col items-center justify-center text-center p-8 cursor-pointer hover:bg-[var(--cane-50)]">
            <input id="harvestUpload" type="file" accept="image/*" class="hidden">
            <i class="fa-solid fa-camera text-2xl text-[var(--cane-600)] mb-2"></i>
            <p class="text-sm text-gray-700">Drop image files here, or click to browse</p>
            <p class="text-[10px] text-gray-500">JPG, PNG up to 5MB</p>
          </label>
        </div>
      </section>
    </div>

    <!-- Review & Submit -->
    <section class="section-card rounded-xl p-5 mt-6">
      <h2 class="font-semibold mb-4">Review & Submit</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Cost summary -->
        <div class="inner-box rounded-lg">
          <div class="p-3 border-b border-[var(--cane-200)] bg-[var(--cane-100)] font-semibold">Cost Summary</div>
          <div class="p-4 text-sm space-y-2">
            <div class="flex items-center justify-between"><span>Fertilizer:</span><span>₱ <span id="sumFertilizer">0.00</span></span></div>
            <div class="flex items-center justify-between"><span>Labor:</span><span>₱ <span id="sumLabor">0.00</span></span></div>
            <div class="flex items-center justify-between"><span>Equipment:</span><span>₱ <span id="sumEquipment">0.00</span></span></div>
            <div class="flex items-center justify-between"><span>Other:</span><span>₱ <span id="sumOther">0.00</span></span></div>
          </div>
          <div class="px-4 py-3 border-t border-[var(--cane-200)] flex items-center justify-between font-semibold">
            <span>Total Cost:</span><span>₱ <span id="sumTotal">0.00</span></span>
          </div>
        </div>

        <!-- Production summary -->
        <div class>
          <div class="inner-box rounded-lg">
            <div class="p-3 border-b border-[var(--cane-200)] bg-[var(--cane-100)] font-semibold">Production Summary</div>
            <div class="p-4 text-sm space-y-2">
              <div class="flex items-center justify-between"><span>Area Harvested:</span><span><span id="sumArea">0.00</span> ha</span></div>
              <div class="flex items-center justify-between"><span>Total Yield:</span><span><span id="sumYield">0</span> kg</span></div>
              <div class="flex items-center justify-between"><span>Harvest Date:</span><span id="sumDate">Not set</span></div>
              <div class="flex items-center justify-between"><span>Variety:</span><span id="sumVariety">Not selected</span></div>
            </div>
          </div>

          <div class="mt-4 flex items-center gap-2 text-sm">
            <input id="confirm" type="checkbox" class="w-4 h-4 border-gray-300">
            <label for="confirm">I confirm that all information provided is accurate and complete</label>
          </div>

          <div class="mt-4 flex flex-wrap gap-3">
            <button id="submitBtn" disabled class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 cursor-not-allowed">Submit report to SRA</button>
            <button class="px-4 py-2 rounded-lg bg-white border border-[var(--cane-300)] text-[var(--cane-800)] hover:bg-[var(--cane-50)]">Save as Draft</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    function toMoney(n){return (Number(n)||0).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});}
    function updateCosts(){
      const f=+document.getElementById('fertilizerCost').value||0;
      const l=+document.getElementById('laborCost').value||0;
      const e=+document.getElementById('equipmentCost').value||0;
      const o=+document.getElementById('otherCost').value||0;
      const t=f+l+e+o;
      document.getElementById('totalCost').textContent=toMoney(t);
      document.getElementById('sumFertilizer').textContent=toMoney(f);
      document.getElementById('sumLabor').textContent=toMoney(l);
      document.getElementById('sumEquipment').textContent=toMoney(e);
      document.getElementById('sumOther').textContent=toMoney(o);
      document.getElementById('sumTotal').textContent=toMoney(t);
    }
    ['fertilizerCost','laborCost','equipmentCost','otherCost'].forEach(id=>{
      document.addEventListener('input', (ev)=>{ if(ev.target && ev.target.id===id){ updateCosts(); }});
    });

    function updateProduction(){
      const area=document.getElementById('areaHarvested').value;
      const yieldKg=document.getElementById('totalYield').value;
      const date=document.getElementById('harvestDate').value;
      const variety=document.getElementById('variety').value;
      document.getElementById('sumArea').textContent=(Number(area)||0).toFixed(2);
      document.getElementById('sumYield').textContent=(Number(yieldKg)||0).toLocaleString();
      document.getElementById('sumDate').textContent=date?new Date(date).toLocaleDateString():"Not set";
      document.getElementById('sumVariety').textContent=variety||'Not selected';
    }
    ['areaHarvested','totalYield','harvestDate','variety'].forEach(id=>{
      document.addEventListener('input', (ev)=>{ if(ev.target && ev.target.id===id){ updateProduction(); }});
      document.addEventListener('change', (ev)=>{ if(ev.target && ev.target.id===id){ updateProduction(); }});
    });

    const confirmBox=document.getElementById('confirm');
    const submitBtn=document.getElementById('submitBtn');
    confirmBox.addEventListener('change',()=>{
      submitBtn.disabled=!confirmBox.checked;
      submitBtn.className=confirmBox.checked?
        'px-4 py-2 rounded-lg text-white bg-[var(--cane-700)] hover:bg-[var(--cane-800)] shadow':
        'px-4 py-2 rounded-lg bg-gray-200 text-gray-700 cursor-not-allowed';
    });

    // Modal controls
    const modal = document.getElementById('reportModal');
    const createReportBtn = document.getElementById('createReportBtn');
    const closeModalBtn = document.getElementById('closeModalBtn');

    createReportBtn.addEventListener('click', () => {
      modal.classList.add('active');
    });

    closeModalBtn.addEventListener('click', () => {
      modal.classList.remove('active');
    });

    // Close modal when clicking outside
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.classList.remove('active');
      }
    });

    // Search functionality
    document.getElementById('searchReports').addEventListener('input', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      const rows = document.querySelectorAll('#reportsTbody tr');
      
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(searchTerm) ? '' : 'none';
      });
    });
  </script>

</body>
</html>


